<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data noupdate="0">
		<record id="atr_partner" model="atr">
	        <field name="name">Conexión Contactos</field>
	        <field name="type_atr">partner</field>
	        <field name="sql">SELECT
    t.rif,
    firm_name AS contribuyente,
    CASE
        WHEN natural_person THEN 'NATURAL'
        ELSE 'JURIDICO'
    END AS tipo_contribuyente,
    CASE
        WHEN t.active THEN 'ACTIVO'
        ELSE 'INACTIVO'
    END AS estatus,
    u.email AS email,
    u.correo_secundario AS email2,
    u.celular AS tlf_celular,
    u.local AS tlf_local
FROM taxpayer t
LEFT JOIN appweb.users_web u ON u.id_taxpayer = t.id
WHERE firm_name not ilike '%prueba%' AND u.id IS NOT NULL
-- AND t.active AND NOT deleted -- SOLO PARA CONTRIBUYENTES ACTIVOS
ORDER BY contribuyente
OFFSET {offset} LIMIT {limit}</field>
	        <field name="sql_count">SELECT COUNT(*)
FROM taxpayer t
LEFT JOIN appweb.users_web u ON u.id_taxpayer = t.id
WHERE firm_name not ilike '%prueba%' AND u.id IS NOT NULL
-- AND t.active AND NOT deleted -- SOLO PARA CONTRIBUYENTES ACTIVOS</field>
	    </record>
	    <record id="atr_payment" model="atr">
	        <field name="name">Conexión a Declaraciones de Impuestos</field>
	        <field name="type_atr">payment</field>
	    </record>
	</data>
</odoo>